  console.log
    [MobileStore] Refreshing artists from DB...

      at Object.log [as refreshArtists] (store/index.ts:1100:21)

  console.log
    [MobileStore] Loaded 0 artists from DB

      at log (store/index.ts:1104:29)

  console.log
    [MobileStore] Refreshing artists from DB...

      at Object.log [as refreshArtists] (store/index.ts:1100:21)

  console.log
    [MobileStore] Loaded 0 artists from DB

      at log (store/index.ts:1104:29)

  console.log
    Discovery found IP: 192.168.1.30

      at Object.log (store/index.ts:390:25)

  console.log
    [MobileStore] addAlbumToQueue called. URL: url, PlayNext: true, Tracks: undefined

      at Object.log [as addAlbumToQueue] (store/index.ts:716:17)

  console.warn
    [MobileStore] addAlbumToQueue called without tracks! Fetching... url

    [0m [90m 745 |[39m             [36mget[39m()[33m.[39msaveQueue()[33m;[39m
     [90m 746 |[39m         } [36melse[39m {
    [31m[1m>[22m[39m[90m 747 |[39m             console[33m.[39mwarn([32m'[MobileStore] addAlbumToQueue called without tracks! Fetching...'[39m[33m,[39m albumUrl)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 748 |[39m             [36mconst[39m { mobileScraperService } [33m=[39m require([32m'../services/MobileScraperService'[39m)[33m;[39m
     [90m 749 |[39m             [90m// Force fetch tracks[39m
     [90m 750 |[39m             mobileScraperService[33m.[39mgetAlbumDetails(albumUrl)[0m

      at Object.warn [as addAlbumToQueue] (store/index.ts:747:21)
      at addAlbumToQueue (store/index.test.ts:317:43)
      at callback (node_modules/@testing-library/react-native/src/act.ts:31:24)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:789:22)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at Object.<anonymous> (store/index.test.ts:317:16)

FAIL store/index.test.ts
  Mobile useStore
    √î≈Ç√ú should restore volume when switching to standalone mode (131 ms)
    √î≈Ç√ú should set connectionStatus to disconnected when switching to remote mode if not connected (5 ms)
    √î≈Ç√ú should connect to a host (3 ms)
    √î≈Ç√ú should disconnect (2 ms)
    ‚îú≈ö should autoConnect with saved IP (2 ms)
    √î≈Ç√ú should remove recent IP (1 ms)
    √î≈Ç√ú should start scan and connect if found (1 ms)
    Playback Controls
      √î≈Ç√ú should send play command (1 ms)
      √î≈Ç√ú should send pause command
      √î≈Ç√ú should send next command (1 ms)
      √î≈Ç√ú should send previous command (1 ms)
      √î≈Ç√ú should send seek command (1 ms)
      √î≈Ç√ú should send setVolume command
      √î≈Ç√ú should send toggleShuffle command (1 ms)
      √î≈Ç√ú should send setRepeat command (1 ms)
    Content Actions
      √î≈Ç√ú should play track
      √î≈Ç√ú should play album
      √î≈Ç√ú should play playlist (1 ms)
      √î≈Ç√ú should play station (1 ms)
      √î≈Ç√ú should add station to queue (1 ms)
      √î≈Ç√ú should add track to queue (1 ms)
      √î≈Ç√ú should add album to queue (43 ms)
      √î≈Ç√ú should add track to playlist
      √î≈Ç√ú should add album to playlist (1 ms)
      √î≈Ç√ú should add station to playlist (1 ms)
      √î≈Ç√ú should play queue index (1 ms)
      √î≈Ç√ú should remove from queue (1 ms)
      √î≈Ç√ú should clear queue (1 ms)
    WebSocket Events
      √î≈Ç√ú should handle state-changed event and sync TrackPlayer (1 ms)
      √î≈Ç√ú should handle collection-data event (2 ms)
      √î≈Ç√ú should handle playlists-data event (1 ms)
      √î≈Ç√ú should handle radio-data event
      √î≈Ç√ú should handle time-update and sync TrackPlayer (2 ms)
      √î≈Ç√ú should handle connection-status event (2 ms)
      √î≈Ç√ú should handle errors in state-changed sync (1 ms)
      √î≈Ç√ú refresh collection with force server refresh (10 ms)

  √î≈öƒÜ Mobile useStore √î√á‚ïë should autoConnect with saved IP

    expect(received).toBe(expected) // Object.is equality

    Expected: "192.168.1.20"
    Received: ""

      211 |
      212 |         // hostIp should be set by connect()
    > 213 |         expect(useStore.getState().hostIp).toBe('192.168.1.20');
          |                                            ^
      214 |         expect(webSocketService.connect).toHaveBeenCalledWith('192.168.1.20');
      215 |         expect(useStore.getState().recentIps).toEqual(['192.168.1.20']);
      216 |     });

      at Object.toBe (store/index.test.ts:213:44)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)

PASS __tests__/app/(tabs)/player.test.tsx
  PlayerScreen
    √î≈Ç√ú renders track info correctly (1140 ms)
    √î≈Ç√ú renders placeholder when no track (11 ms)
    √î≈Ç√ú calls play/pause when button is pressed (60 ms)
    √î≈Ç√ú calls next/previous (22 ms)
    √î≈Ç√ú toggles shuffle (17 ms)
    √î≈Ç√ú cycles repeat mode (20 ms)
    √î≈Ç√ú shows volume modal when volume button is pressed (51 ms)
    √î≈Ç√ú switches to remote mode when mode badge is pressed (11 ms)

PASS __tests__/app/(tabs)/artists.test.tsx
  ArtistsScreen
    √î≈Ç√ú renders correctly and lists artists (1183 ms)
    √î≈Ç√ú filters artists by search query (34 ms)
    √î≈Ç√ú calls refreshArtists on mount if connected (32 ms)
    √î≈Ç√ú renders placeholders for artists without images (21 ms)

PASS __tests__/app/(tabs)/queue.test.tsx
  QueueScreen
    √î≈Ç√ú renders empty queue state (882 ms)
    √î≈Ç√ú renders queue items (116 ms)
    √î≈Ç√ú highlights current playing track (10 ms)
    √î≈Ç√ú calls playQueueIndex on item press (10 ms)
    √î≈Ç√ú calls removeFromQueue on remove button press (21 ms)

PASS __tests__/app/album_detail.test.tsx
  AlbumDetailScreen
    √î≈Ç√ú renders loading state initially (802 ms)
    √î≈Ç√ú renders album details when data arrives (348 ms)
    √î≈Ç√ú navigates back when back button is pressed (31 ms)
    √î≈Ç√ú plays album when Play Album button is pressed (25 ms)
    √î≈Ç√ú plays track when track is pressed (11 ms)

  console.log
    Connecting to ws://127.0.0.1:8080

      at WebSocketService.log [as initWebSocket] (services/WebSocketService.ts:30:17)

  console.log
    Connected to desktop app

      at MockWebSocket.log [as onopen] (services/WebSocketService.ts:37:21)

  console.log
    Connecting to ws://127.0.0.1:9999

      at WebSocketService.log [as initWebSocket] (services/WebSocketService.ts:30:17)

  console.log
    Connected to desktop app

      at MockWebSocket.log [as onopen] (services/WebSocketService.ts:37:21)

  console.log
    Connecting to ws://127.0.0.1:9999

      at WebSocketService.log [as initWebSocket] (services/WebSocketService.ts:30:17)

  console.log
    Connected to desktop app

      at MockWebSocket.log [as onopen] (services/WebSocketService.ts:37:21)

  console.log
    Connecting to ws://127.0.0.1:9999

      at WebSocketService.log [as initWebSocket] (services/WebSocketService.ts:30:17)

  console.log
    Connected to desktop app

      at MockWebSocket.log [as onopen] (services/WebSocketService.ts:37:21)

  console.error
    Failed to load license: Error: Load failed
        at Object.<anonymous> (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\__tests__\app\license.test.tsx:61:19)
        at D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-mock\build\index.js:397:39
        at Object.<anonymous> (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-mock\build\index.js:404:13)
        at Object.mockConstructor [as fromModule] (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-mock\build\index.js:148:19)
        at fromModule (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\app\license.tsx:19:37)
        at Generator.next (<anonymous>)
        at asyncGeneratorStep (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@babel\runtime\helpers\asyncToGenerator.js:3:17)
        at _next (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@babel\runtime\helpers\asyncToGenerator.js:17:9)
        at D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@babel\runtime\helpers\asyncToGenerator.js:22:7
        at new Promise (<anonymous>)
        at D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@babel\runtime\helpers\asyncToGenerator.js:14:12
        at apply (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\app\license.tsx:33:10)
        at apply (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\app\license.tsx:16:35)
        at loadLicense (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\app\license.tsx:35:9)
        at Object.react-stack-bottom-frame (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react-test-renderer\cjs\react-test-renderer.development.js:14062:20)
        at runWithFiberInDEV (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react-test-renderer\cjs\react-test-renderer.development.js:1574:13)
        at commitHookEffectListMount (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react-test-renderer\cjs\react-test-renderer.development.js:8376:29)
        at commitHookPassiveMountEffects (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react-test-renderer\cjs\react-test-renderer.development.js:8465:11)
        at commitPassiveMountOnFiber (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react-test-renderer\cjs\react-test-renderer.development.js:9782:13)
        at recursivelyTraversePassiveMountEffects (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react-test-renderer\cjs\react-test-renderer.development.js:9756:11)
        at commitPassiveMountOnFiber (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react-test-renderer\cjs\react-test-renderer.development.js:9794:11)
        at flushPendingEffects (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react-test-renderer\cjs\react-test-renderer.development.js:11528:11)
        at performWorkOnRootViaSchedulerTask (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react-test-renderer\cjs\react-test-renderer.development.js:2082:11)
        at flushActQueue (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react\cjs\react.development.js:566:34)
        at Object.<anonymous>.process.env.NODE_ENV.exports.act (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react\cjs\react.development.js:859:10)
        at actImplementation (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@testing-library\react-native\src\act.ts:30:25)
        at renderWithAct (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@testing-library\react-native\src\render-act.ts:13:11)
        at renderInternal (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@testing-library\react-native\src\render.tsx:69:33)
        at renderInternal (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@testing-library\react-native\src\render.tsx:44:10)
        at Object.<anonymous> (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\__tests__\app\license.test.tsx:64:37)
        at Generator.next (<anonymous>)
        at asyncGeneratorStep (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@babel\runtime\helpers\asyncToGenerator.js:3:17)
        at _next (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@babel\runtime\helpers\asyncToGenerator.js:17:9)
        at D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@babel\runtime\helpers\asyncToGenerator.js:22:7
        at new Promise (<anonymous>)
        at Object.<anonymous> (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@babel\runtime\helpers\asyncToGenerator.js:14:12)
        at Promise.then.completed (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-circus\build\run.js:316:40)
        at _runTest (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-circus\build\run.js:121:9)
        at run (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 26 |[39m                 }
     [90m 27 |[39m             } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 28 |[39m                 console[33m.[39merror([32m'Failed to load license:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 29 |[39m                 setContent([32m'Failed to load license text.'[39m)[33m;[39m
     [90m 30 |[39m             } [36mfinally[39m {
     [90m 31 |[39m                 setLoading([36mfalse[39m)[33m;[39m[0m

      at error (app/license.tsx:28:25)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (app/license.tsx:33:10)
      at apply (app/license.tsx:16:35)
      at loadLicense (app/license.tsx:35:9)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14062:20)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1574:13)
      at commitHookEffectListMount (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:8376:29)
      at commitHookPassiveMountEffects (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:8465:11)
      at commitPassiveMountOnFiber (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9782:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9756:11)
      at commitPassiveMountOnFiber (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9794:11)
      at flushPendingEffects (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11528:11)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:2082:11)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (__tests__/app/license.test.tsx:64:37)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at Object.<anonymous> (node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12)

  console.log
    Disconnected

      at MockWebSocket.log [as onclose] (services/WebSocketService.ts:67:25)

  console.log
    Starting reconnect loop...

      at WebSocketService.log [as startReconnect] (services/WebSocketService.ts:116:17)

  console.log
    Attempting reconnect...

      at log (services/WebSocketService.ts:118:21)

  console.error
    Failed to load license: Error: Load failed
        at Object.<anonymous> (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\__tests__\app\license.test.tsx:61:19)
        at D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-mock\build\index.js:397:39
        at Object.<anonymous> (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-mock\build\index.js:404:13)
        at Object.mockConstructor [as fromModule] (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-mock\build\index.js:148:19)
        at fromModule (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\app\license.tsx:19:37)
        at Generator.next (<anonymous>)
        at asyncGeneratorStep (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@babel\runtime\helpers\asyncToGenerator.js:3:17)
        at _next (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@babel\runtime\helpers\asyncToGenerator.js:17:9)
        at D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@babel\runtime\helpers\asyncToGenerator.js:22:7
        at new Promise (<anonymous>)
        at D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@babel\runtime\helpers\asyncToGenerator.js:14:12
        at apply (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\app\license.tsx:33:10)
        at apply (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\app\license.tsx:16:35)
        at loadLicense (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\app\license.tsx:35:9)
        at Object.react-stack-bottom-frame (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react-test-renderer\cjs\react-test-renderer.development.js:14062:20)
        at runWithFiberInDEV (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react-test-renderer\cjs\react-test-renderer.development.js:1574:13)
        at commitHookEffectListMount (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react-test-renderer\cjs\react-test-renderer.development.js:8376:29)
        at commitHookPassiveMountEffects (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react-test-renderer\cjs\react-test-renderer.development.js:8465:11)
        at commitPassiveMountOnFiber (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react-test-renderer\cjs\react-test-renderer.development.js:9782:13)
        at recursivelyTraversePassiveMountEffects (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react-test-renderer\cjs\react-test-renderer.development.js:9756:11)
        at commitPassiveMountOnFiber (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react-test-renderer\cjs\react-test-renderer.development.js:9794:11)
        at flushPendingEffects (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react-test-renderer\cjs\react-test-renderer.development.js:11528:11)
        at performWorkOnRootViaSchedulerTask (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react-test-renderer\cjs\react-test-renderer.development.js:2082:11)
        at flushActQueue (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react\cjs\react.development.js:566:34)
        at Object.<anonymous>.process.env.NODE_ENV.exports.act (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\react\cjs\react.development.js:859:10)
        at actImplementation (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@testing-library\react-native\src\act.ts:30:25)
        at renderWithAct (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@testing-library\react-native\src\render-act.ts:13:11)
        at renderInternal (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@testing-library\react-native\src\render.tsx:69:33)
        at renderInternal (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\@testing-library\react-native\src\render.tsx:44:10)
        at Object.<anonymous> (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\__tests__\app\license.test.tsx:73:39)
        at Promise.then.completed (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-circus\build\utils.js:298:28)
        at new Promise (<anonymous>)
        at callAsyncCircusFn (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-circus\build\utils.js:231:10)
        at _callCircusTest (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-circus\build\run.js:316:40)
        at _runTest (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-circus\build\run.js:252:3)
        at _runTestsForDescribeBlock (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-circus\build\run.js:126:9)
        at _runTestsForDescribeBlock (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-circus\build\run.js:121:9)
        at run (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-circus\build\run.js:71:3)
        at runAndTransformResultsToJestFormat (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
        at jestAdapter (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
        at runTestInternal (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-runner\build\runTest.js:367:16)
        at runTest (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-runner\build\runTest.js:444:34)
        at Object.worker (D:\eremef\Documents\AI\antigravity\Bandcamp-player\mobile\node_modules\jest-runner\build\testWorker.js:106:12)

    [0m [90m 26 |[39m                 }
     [90m 27 |[39m             } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 28 |[39m                 console[33m.[39merror([32m'Failed to load license:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 29 |[39m                 setContent([32m'Failed to load license text.'[39m)[33m;[39m
     [90m 30 |[39m             } [36mfinally[39m {
     [90m 31 |[39m                 setLoading([36mfalse[39m)[33m;[39m[0m

      at error (app/license.tsx:28:25)
      at asyncGeneratorStep (node_modules/@babel/runtime/helpers/asyncToGenerator.js:3:17)
      at _next (node_modules/@babel/runtime/helpers/asyncToGenerator.js:17:9)
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:22:7
      at node_modules/@babel/runtime/helpers/asyncToGenerator.js:14:12
      at apply (app/license.tsx:33:10)
      at apply (app/license.tsx:16:35)
      at loadLicense (app/license.tsx:35:9)
      at Object.react-stack-bottom-frame (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14062:20)
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1574:13)
      at commitHookEffectListMount (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:8376:29)
      at commitHookPassiveMountEffects (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:8465:11)
      at commitPassiveMountOnFiber (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9782:13)
      at recursivelyTraversePassiveMountEffects (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9756:11)
      at commitPassiveMountOnFiber (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:9794:11)
      at flushPendingEffects (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11528:11)
      at performWorkOnRootViaSchedulerTask (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:2082:11)
      at flushActQueue (node_modules/react/cjs/react.development.js:566:34)
      at Object.<anonymous>.process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:859:10)
      at actImplementation (node_modules/@testing-library/react-native/src/act.ts:30:25)
      at renderWithAct (node_modules/@testing-library/react-native/src/render-act.ts:13:11)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:69:33)
      at renderInternal (node_modules/@testing-library/react-native/src/render.tsx:44:10)
      at Object.<anonymous> (__tests__/app/license.test.tsx:73:39)

  console.log
    Connecting to ws://127.0.0.1:9999

      at WebSocketService.log [as initWebSocket] (services/WebSocketService.ts:30:17)

  console.log
    Connecting to ws://127.0.0.1:9999

      at WebSocketService.log [as initWebSocket] (services/WebSocketService.ts:30:17)

  console.log
    Connected to desktop app

      at MockWebSocket.log [as onopen] (services/WebSocketService.ts:37:21)

  console.log
    Disconnected

      at MockWebSocket.log [as onclose] (services/WebSocketService.ts:67:25)

  console.log
    Starting reconnect loop...

      at WebSocketService.log [as startReconnect] (services/WebSocketService.ts:116:17)

  console.log
    [MobilePlayer] Final stream URL: http://test.com/stream.mp3

      at MobilePlayerService.log (services/MobilePlayerService.ts:257:21)

  console.log
    [MobilePlayer] Calling TrackPlayer.play()

      at MobilePlayerService.log (services/MobilePlayerService.ts:287:21)

  console.log
    Connecting to ws://127.0.0.1:9999

      at WebSocketService.log [as initWebSocket] (services/WebSocketService.ts:30:17)

  console.log
    [MobilePlayer] Playback started

      at MobilePlayerService.log (services/MobilePlayerService.ts:289:21)

  console.log
    Connected to desktop app

      at MockWebSocket.log [as onopen] (services/WebSocketService.ts:37:21)

  console.log
    [MobilePlayer] Track ended. Repeat mode: one

      at MobilePlayerService.log (services/MobilePlayerService.ts:196:17)

  console.log
    Received disconnect from host

      at MockWebSocket.log [as onmessage] (services/WebSocketService.ts:47:29)

  console.log
    Received disconnect from host

      at MockWebSocket.log [as onmessage] (services/WebSocketService.ts:47:29)

  console.log
    [MobilePlayer] Track ended. Repeat mode: off

      at MobilePlayerService.log (services/MobilePlayerService.ts:196:17)

  console.log
    [MobilePlayer] Next track index: 1

      at MobilePlayerService.log (services/MobilePlayerService.ts:138:17)

PASS services/WebSocketService.test.ts
  WebSocketService
    √î≈Ç√ú should connect to the correct URL (117 ms)
    √î≈Ç√ú should send messages when connected (4 ms)
    √î≈Ç√ú should handle incoming messages (12 ms)
    √î≈Ç√ú should remove listeners correctly (2 ms)
    √î≈Ç√ú should attempt reconnect on close (17 ms)
    √î≈Ç√ú should stop reconnect on explicit disconnect (8 ms)
    √î≈Ç√ú should handle disconnect message from server (6 ms)

PASS __tests__/app/license.test.tsx
  LicenseScreen
    √î≈Ç√ú loads and displays license text (745 ms)
    √î≈Ç√ú handles loading error gracefully (69 ms)
    √î≈Ç√ú navigates back on arrow press (11 ms)

  console.log
    [MobilePlayer] Final stream URL: url2

      at MobilePlayerService.log (services/MobilePlayerService.ts:257:21)

  console.log
    [MobilePlayer] Calling TrackPlayer.play()

      at MobilePlayerService.log (services/MobilePlayerService.ts:287:21)

  console.log
    [MobilePlayer] Playback started

      at MobilePlayerService.log (services/MobilePlayerService.ts:289:21)

  console.log
    [MobilePlayer] Final stream URL: http://test.com/load.mp3

      at MobilePlayerService.log (services/MobilePlayerService.ts:257:21)

PASS __tests__/MobilePlayerService.test.ts
  MobilePlayerService
    √î≈Ç√ú should setup player successfully (1 ms)
    √î≈Ç√ú should play a track provided directly (156 ms)
    √î≈Ç√ú should handle track end with repeat mode "one" (2 ms)
    √î≈Ç√ú should handle track end by playing next track (18 ms)
    √î≈Ç√ú should load a track without playing (4 ms)

PASS __tests__/app/artist_detail.test.tsx
  ArtistDetailScreen
    √î≈Ç√ú renders correctly (1350 ms)
    √î≈Ç√ú handles interaction with album - navigates to detail (12 ms)
    √î≈Ç√ú handles interaction with track - plays album url (36 ms)
    √î≈Ç√ú shows action sheet on long press (54 ms)
    √î≈Ç√ú adds to queue from action sheet (43 ms)

PASS services/player.test.ts
  player.ts
    setupPlayer
      √î≈Ç√ú should setup player if not already set up (3 ms)
      √î≈Ç√ú should handle player already setup error (1 ms)
      √î≈Ç√ú should configure capabilities correctly (1 ms)
    addTrack
      √î≈Ç√ú should reset and add track (1 ms)
      √î≈Ç√ú should set volume to 0 (muted on mobile)
      √î≈Ç√ú should replace localhost with host IP
      √î≈Ç√ú should replace 127.0.0.1 with host IP (2 ms)

PASS services/TrackPlayerService.test.ts
  TrackPlayerService
    √î≈Ç√ú should register all event listeners (3 ms)
    √î≈Ç√ú should call store.play on RemotePlay (1 ms)
    √î≈Ç√ú should call store.pause on RemotePause (1 ms)
    √î≈Ç√ú should call store.next on RemoteNext
    √î≈Ç√ú should call store.previous on RemotePrevious (1 ms)
    √î≈Ç√ú should call store.seek with position on RemoteSeek
    √î≈Ç√ú should call store.seek with calculated position on RemoteJumpForward (1 ms)
    √î≈Ç√ú should call store.seek with calculated position on RemoteJumpBackward (1 ms)
    √î≈Ç√ú should reset player on RemoteStop (1 ms)

PASS services/discovery.service.test.ts
  DiscoveryService
    √î≈Ç√ú should get local IP (1 ms)
    √î≈Ç√ú should find server IP when probe succeeds (1 ms)
    √î≈Ç√ú should return null if scanning fails (3 ms)
    √î≈Ç√ú should report progress (2 ms)

  console.error
    An update to VirtualizedList inside a test was not wrapped in act(...).
    
    When testing, code that causes React state updates should be wrapped into act(...):
    
    act(() => {
      /* fire events that update state */
    });
    /* assert on the output */
    
    This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

      at node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11801:19
      at runWithFiberInDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:1574:13)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:11800:9)
      at scheduleUpdateOnFiber (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:10326:9)
      at Object.enqueueSetState (node_modules/react-test-renderer/cjs/react-test-renderer.development.js:14179:14)
      at VirtualizedList.Object.<anonymous>.process.env.NODE_ENV.Component.setState (node_modules/react/cjs/react.development.js:632:20)
      at node_modules/@babel/runtime/helpers/superPropGet.js:6:14
      at VirtualizedList.setState (node_modules/react-native/node_modules/@react-native/virtualized-lists/Lists/StateSafePureComponent.js:39:7)
      at VirtualizedList.setState [as _updateCellsToRender] (node_modules/react-native/node_modules/@react-native/virtualized-lists/Lists/VirtualizedList.js:1907:10)
      at Timeout._updateCellsToRender [as _onTimeout] (node_modules/react-native/node_modules/@react-native/virtualized-lists/Lists/VirtualizedList.js:1804:16)

PASS __tests__/app/about.test.tsx
  AboutScreen
    √î≈Ç√ú renders correctly (91 ms)
    √î≈Ç√ú opens github link on press (10 ms)
    √î≈Ç√ú opens website link on copyright press (5 ms)
    √î≈Ç√ú navigates to license screen (5 ms)
    √î≈Ç√ú navigates back on arrow press (6 ms)

PASS components/PlaylistSelectionModal.test.tsx
  PlaylistSelectionModal
    √î≈Ç√ú renders correctly when visible (210 ms)
    √î≈Ç√ú renders empty state message (2 ms)
    √î≈Ç√ú calls onSelect when a playlist is pressed (5 ms)

PASS __tests__/app/(tabs)/collection.test.tsx
  CollectionScreen
    √î≈Ç√ú renders loading state when collection is null (337 ms)
    √î≈Ç√ú renders collection items (1111 ms)
    √î≈Ç√ú navigates to album detail on press if album has multiple tracks (8 ms)
    √î≈Ç√ú plays item directly on press if it is a single track or single-track album (15 ms)
    √î≈Ç√ú shows context menu on long press (24 ms)
    √î≈Ç√ú refreshes collection on pull to refresh (16 ms)
    √î≈Ç√ú triggers search with debounce (632 ms)

A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
-----------------------------|---------|----------|---------|---------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
File                         | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                                                                                                                                                                                                                                                                                                                         
-----------------------------|---------|----------|---------|---------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
All files                    |   37.34 |    27.07 |   40.28 |   38.33 |                                                                                                                                                                                                                                                                                                                                                                           
 app                         |   28.52 |     7.22 |   29.88 |   27.81 |                                                                                                                                                                                                                                                                                                                                                                           
  +not-found.tsx             |       0 |      100 |       0 |       0 | 7-28                                                                                                                                                                                                                                                                                                                                                                      
  _layout.tsx                |       0 |        0 |       0 |       0 | 12-85                                                                                                                                                                                                                                                                                                                                                                     
  about.tsx                  |     100 |       50 |     100 |     100 | 11                                                                                                                                                                                                                                                                                                                                                                        
  album_detail.tsx           |   53.27 |    28.12 |   47.22 |   51.51 | 23-25,52-70,104-138,142-170,174-184,191,204-207,234,267-274                                                                                                                                                                                                                                                                                                               
  bandcamp_login.tsx         |       0 |        0 |       0 |       0 | 12-230                                                                                                                                                                                                                                                                                                                                                                    
  index.tsx                  |       0 |        0 |       0 |       0 | 11-263                                                                                                                                                                                                                                                                                                                                                                    
  license.tsx                |     100 |       75 |     100 |     100 | 22                                                                                                                                                                                                                                                                                                                                                                        
  settings.tsx               |       0 |      100 |       0 |       0 | 9-27                                                                                                                                                                                                                                                                                                                                                                      
 app/(tabs)                  |   43.57 |    44.31 |   35.84 |    43.8 |                                                                                                                                                                                                                                                                                                                                                                           
  _layout.tsx                |       0 |        0 |       0 |       0 | 12-82                                                                                                                                                                                                                                                                                                                                                                     
  artists.tsx                |   90.19 |     62.5 |   93.33 |   97.82 | 74                                                                                                                                                                                                                                                                                                                                                                        
  collection.tsx             |   69.36 |    33.92 |   61.53 |   66.66 | 58-77,90-100,107-108,122,128-144,166,180-185,213,231,244-250                                                                                                                                                                                                                                                                                                              
  player.tsx                 |   55.26 |    69.64 |   35.29 |   55.26 | 45-47,51-64,86,102,145,231-294                                                                                                                                                                                                                                                                                                                                            
  playlists.tsx              |       0 |        0 |       0 |       0 | 14-214                                                                                                                                                                                                                                                                                                                                                                    
  queue.tsx                  |   87.87 |     90.9 |   86.66 |   85.71 | 83-86                                                                                                                                                                                                                                                                                                                                                                     
  radio.tsx                  |       0 |        0 |       0 |       0 | 14-183                                                                                                                                                                                                                                                                                                                                                                    
 app/artist                  |   65.67 |     37.5 |      60 |   68.25 |                                                                                                                                                                                                                                                                                                                                                                           
  artist_detail.tsx          |   65.67 |     37.5 |      60 |   68.25 | 55-58,63,85,97-100,109-116,129-139,207                                                                                                                                                                                                                                                                                                                                    
 components                  |   73.46 |    55.88 |      75 |      75 |                                                                                                                                                                                                                                                                                                                                                                           
  ActionSheet.tsx            |     100 |     87.5 |     100 |     100 | 47                                                                                                                                                                                                                                                                                                                                                                        
  CollectionGridItem.tsx     |   93.33 |       80 |     100 |   93.33 | 33                                                                                                                                                                                                                                                                                                                                                                        
  InputModal.tsx             |       0 |        0 |       0 |       0 | 23-82                                                                                                                                                                                                                                                                                                                                                                     
  PlaylistSelectionModal.tsx |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                           
  SearchBar.tsx              |    62.5 |       40 |      50 |   71.42 | 22-23                                                                                                                                                                                                                                                                                                                                                                     
  StandardHeader.tsx         |     100 |      100 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                           
 services                    |    25.4 |    11.31 |   35.34 |    26.6 |                                                                                                                                                                                                                                                                                                                                                                           
  MobileAuthService.ts       |    7.84 |        0 |       0 |       8 | 20-131                                                                                                                                                                                                                                                                                                                                                                    
  MobileDatabase.ts          |    5.61 |        0 |       0 |    6.75 | 11-198,205-258                                                                                                                                                                                                                                                                                                                                                            
  MobilePlayerService.ts     |   40.15 |    25.75 |   38.88 |    42.4 | 22-25,61-62,69-71,78-112,125,129-134,143-163,172-186,218-237,244-246,270-272,291                                                                                                                                                                                                                                                                                          
  MobileScraperService.ts    |    0.58 |        0 |       0 |    0.63 | 17-785                                                                                                                                                                                                                                                                                                                                                                    
  TrackPlayerService.ts      |   74.07 |        0 |   81.81 |   76.92 | 14-17,50-52                                                                                                                                                                                                                                                                                                                                                               
  WebSocketService.ts        |   84.33 |    56.09 |   88.88 |   91.78 | 57,76-78,87-92                                                                                                                                                                                                                                                                                                                                                            
  discovery.service.ts       |   86.84 |       75 |    87.5 |   90.62 | 11-12,66                                                                                                                                                                                                                                                                                                                                                                  
  player.ts                  |   93.75 |    77.77 |     100 |   93.75 | 16                                                                                                                                                                                                                                                                                                                                                                        
  useVolumeButtons.ts        |       0 |        0 |       0 |       0 | 12-49                                                                                                                                                                                                                                                                                                                                                                     
 store                       |   48.67 |    46.82 |   53.19 |   50.76 |                                                                                                                                                                                                                                                                                                                                                                           
  index.ts                   |   48.67 |    46.82 |   53.19 |   50.76 | 136-143,154-162,190,197,262-267,279-288,317-319,340-368,386,409-410,417-418,425-426,433-434,441-442,449-450,457-458,465-466,479-497,504-539,547-567,574-614,644,658-661,669-681,696,711,719-745,754,760-761,768-781,790-791,798-805,814-816,829,834,851-856,883-908,929-976,992,1009-1010,1028-1069,1075,1083,1090-1091,1098,1113-1140,1153,1191,1209,1243-1244,1248-1249 
 theme                       |     100 |    66.66 |     100 |     100 |                                                                                                                                                                                                                                                                                                                                                                           
  index.ts                   |     100 |    66.66 |     100 |     100 | 36-39                                                                                                                                                                                                                                                                                                                                                                     
 types                       |       0 |        0 |       0 |       0 |                                                                                                                                                                                                                                                                                                                                                                           
  safe-area-context.d.ts     |       0 |        0 |       0 |       0 |                                                                                                                                                                                                                                                                                                                                                                           
-----------------------------|---------|----------|---------|---------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Test Suites: 1 failed, 14 passed, 15 total
Tests:       1 failed, 112 passed, 113 total
Snapshots:   0 total
Time:        7.685 s
Ran all test suites.
